// 紫微斗数の定数

import { TianGan, DiZhi, Palace, MainStar, WuXingJu } from '@/types';

// 天干
export const TIAN_GAN: TianGan[] = ['甲', '乙', '丙', '丁', '戊', '己', '庚', '辛', '壬', '癸'];

// 地支
export const DI_ZHI: DiZhi[] = ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'];

// 十二宮の順序（命宮から時計回り）
export const PALACES: Palace[] = [
  '命宮', '父母宮', '福徳宮', '田宅宮', '官禄宮', '交友宮',
  '遷移宮', '疾厄宮', '財帛宮', '子女宮', '夫妻宮', '兄弟宮'
];

// 時辰対応表
export const SHI_CHEN_TIMES: { [key: number]: string } = {
  0: '子時 (23:00〜00:59)',
  1: '丑時 (01:00〜02:59)',
  2: '寅時 (03:00〜04:59)',
  3: '卯時 (05:00〜06:59)',
  4: '辰時 (07:00〜08:59)',
  5: '巳時 (09:00〜10:59)',
  6: '午時 (11:00〜12:59)',
  7: '未時 (13:00〜14:59)',
  8: '申時 (15:00〜16:59)',
  9: '酉時 (17:00〜18:59)',
  10: '戌時 (19:00〜20:59)',
  11: '亥時 (21:00〜22:59)'
};

// 五行局の数値
export const WU_XING_JU_VALUE: Record<WuXingJu, number> = {
  '水二局': 2,
  '木三局': 3,
  '金四局': 4,
  '土五局': 5,
  '火六局': 6
};

// 納音五行表（天干・地支から五行局を決定するための表）
// 命宮の地支と生年天干から五行局を決定
export const NA_YIN_TABLE: Record<string, WuXingJu> = {
  // 甲子 / 乙丑 -> 金
  '甲子': '金四局', '乙丑': '金四局',
  '丙寅': '火六局', '丁卯': '火六局',
  '戊辰': '木三局', '己巳': '木三局',
  '庚午': '土五局', '辛未': '土五局',
  '壬申': '金四局', '癸酉': '金四局',
  '甲戌': '火六局', '乙亥': '火六局',
  '丙子': '水二局', '丁丑': '水二局',
  '戊寅': '土五局', '己卯': '土五局',
  '庚辰': '金四局', '辛巳': '金四局',
  '壬午': '木三局', '癸未': '木三局',
  '甲申': '水二局', '乙酉': '水二局',
  '丙戌': '土五局', '丁亥': '土五局',
  '戊子': '火六局', '己丑': '火六局',
  '庚寅': '木三局', '辛卯': '木三局',
  '壬辰': '水二局', '癸巳': '水二局',
  '甲午': '金四局', '乙未': '金四局',
  '丙申': '火六局', '丁酉': '火六局',
  '戊戌': '木三局', '己亥': '木三局',
  '庚子': '土五局', '辛丑': '土五局',
  '壬寅': '金四局', '癸卯': '金四局',
  '甲辰': '火六局', '乙巳': '火六局',
  '丙午': '水二局', '丁未': '水二局',
  '戊申': '土五局', '己酉': '土五局',
  '庚戌': '金四局', '辛亥': '金四局',
  '壬子': '木三局', '癸丑': '木三局',
  '甲寅': '水二局', '乙卯': '水二局',
  '丙辰': '土五局', '丁巳': '土五局',
  '戊午': '火六局', '己未': '火六局',
  '庚申': '木三局', '辛酉': '木三局',
  '壬戌': '水二局', '癸亥': '水二局',
};

// 紫微星配置表（五行局別、生日から紫微星の位置を決定）
export const ZI_WEI_POSITION: Record<WuXingJu, Record<number, DiZhi>> = {
  '水二局': {
    1: '丑', 2: '寅', 3: '寅', 4: '卯', 5: '卯',
    6: '辰', 7: '辰', 8: '巳', 9: '巳', 10: '午',
    11: '午', 12: '未', 13: '未', 14: '申', 15: '申',
    16: '酉', 17: '酉', 18: '戌', 19: '戌', 20: '亥',
    21: '亥', 22: '子', 23: '子', 24: '丑', 25: '丑',
    26: '寅', 27: '寅', 28: '卯', 29: '卯', 30: '辰'
  },
  '木三局': {
    1: '辰', 2: '辰', 3: '巳', 4: '巳', 5: '巳',
    6: '午', 7: '午', 8: '午', 9: '未', 10: '未',
    11: '未', 12: '申', 13: '申', 14: '申', 15: '酉',
    16: '酉', 17: '酉', 18: '戌', 19: '戌', 20: '戌',
    21: '亥', 22: '亥', 23: '亥', 24: '子', 25: '子',
    26: '子', 27: '丑', 28: '丑', 29: '丑', 30: '寅'
  },
  '金四局': {
    1: '丑', 2: '丑', 3: '丑', 4: '寅', 5: '寅',
    6: '寅', 7: '寅', 8: '卯', 9: '卯', 10: '卯',
    11: '卯', 12: '辰', 13: '辰', 14: '辰', 15: '辰',
    16: '巳', 17: '巳', 18: '巳', 19: '巳', 20: '午',
    21: '午', 22: '午', 23: '午', 24: '未', 25: '未',
    26: '未', 27: '未', 28: '申', 29: '申', 30: '申'
  },
  '土五局': {
    1: '丑', 2: '丑', 3: '丑', 4: '丑', 5: '寅',
    6: '寅', 7: '寅', 8: '寅', 9: '寅', 10: '卯',
    11: '卯', 12: '卯', 13: '卯', 14: '卯', 15: '辰',
    16: '辰', 17: '辰', 18: '辰', 19: '辰', 20: '巳',
    21: '巳', 22: '巳', 23: '巳', 24: '巳', 25: '午',
    26: '午', 27: '午', 28: '午', 29: '午', 30: '未'
  },
  '火六局': {
    1: '丑', 2: '丑', 3: '丑', 4: '丑', 5: '丑',
    6: '寅', 7: '寅', 8: '寅', 9: '寅', 10: '寅',
    11: '寅', 12: '卯', 13: '卯', 14: '卯', 15: '卯',
    16: '卯', 17: '卯', 18: '辰', 19: '辰', 20: '辰',
    21: '辰', 22: '辰', 23: '辰', 24: '巳', 25: '巳',
    26: '巳', 27: '巳', 28: '巳', 29: '巳', 30: '午'
  }
};

// 天府星と紫微星の対応関係
export const TIAN_FU_FROM_ZI_WEI: Record<DiZhi, DiZhi> = {
  '子': '辰', '丑': '巳', '寅': '午', '卯': '未',
  '辰': '申', '巳': '酉', '午': '戌', '未': '亥',
  '申': '子', '酉': '丑', '戌': '寅', '亥': '卯'
};

// 生年四化表
export const SHENG_NIAN_SI_HUA: Record<TianGan, { 化禄: MainStar | string; 化権: MainStar | string; 化科: MainStar | string; 化忌: MainStar | string }> = {
  '甲': { 化禄: '廉貞', 化権: '破軍', 化科: '武曲', 化忌: '太陽' },
  '乙': { 化禄: '天機', 化権: '天梁', 化科: '紫微', 化忌: '太陰' },
  '丙': { 化禄: '天同', 化権: '天機', 化科: '文昌', 化忌: '廉貞' },
  '丁': { 化禄: '太陰', 化権: '天同', 化科: '天機', 化忌: '巨門' },
  '戊': { 化禄: '貪狼', 化権: '太陰', 化科: '右弼', 化忌: '天機' },
  '己': { 化禄: '武曲', 化権: '貪狼', 化科: '天梁', 化忌: '文曲' },
  '庚': { 化禄: '太陽', 化権: '武曲', 化科: '太陰', 化忌: '天同' },
  '辛': { 化禄: '巨門', 化権: '太陽', 化科: '文曲', 化忌: '文昌' },
  '壬': { 化禄: '天梁', 化権: '紫微', 化科: '左輔', 化忌: '武曲' },
  '癸': { 化禄: '破軍', 化権: '巨門', 化科: '太陰', 化忌: '貪狼' }
};

// 禄存配置表
export const LU_CUN_POSITION: Record<TianGan, DiZhi> = {
  '甲': '寅', '乙': '卯', '丙': '巳', '丁': '午',
  '戊': '巳', '己': '午', '庚': '申', '辛': '酉',
  '壬': '亥', '癸': '子'
};

// 天馬配置表
export const TIAN_MA_POSITION: Record<string, DiZhi> = {
  '寅': '申', '午': '申', '戌': '申',
  '申': '寅', '子': '寅', '辰': '寅',
  '巳': '亥', '酉': '亥', '丑': '亥',
  '亥': '巳', '卯': '巳', '未': '巳'
};

// 天魁天鉞配置表
export const KUI_YUE_POSITION: Record<string, { 天魁: DiZhi; 天鉞: DiZhi }> = {
  '甲': { 天魁: '丑', 天鉞: '未' },
  '戊': { 天魁: '丑', 天鉞: '未' },
  '庚': { 天魁: '丑', 天鉞: '未' },
  '乙': { 天魁: '子', 天鉞: '申' },
  '己': { 天魁: '子', 天鉞: '申' },
  '丙': { 天魁: '亥', 天鉞: '酉' },
  '丁': { 天魁: '亥', 天鉞: '酉' },
  '壬': { 天魁: '卯', 天鉞: '巳' },
  '癸': { 天魁: '卯', 天鉞: '巳' },
  '辛': { 天魁: '午', 天鉞: '寅' }
};

// 主星の金運特性
export const STAR_FORTUNE_TRAITS: Record<MainStar, {
  element: string;
  fortuneTrait: string;
  description: string;
}> = {
  '紫微': {
    element: '土',
    fortuneTrait: '大きな財を動かす能力。権力と財が結びつく',
    description: '帝王の星。組織のトップとして大きなスケールの財運を持つ'
  },
  '天機': {
    element: '木',
    fortuneTrait: '知恵で財を生む。頭脳労働向き',
    description: '智慧の星。知識やアイデアで財を築く'
  },
  '太陽': {
    element: '火',
    fortuneTrait: '表舞台での成功。名声とともに財が来る',
    description: '光明の星。社会的評価を通じて財を得る'
  },
  '武曲': {
    element: '金',
    fortuneTrait: '財星の筆頭。正財・実業向き',
    description: '財帛の星。正統な方法で確実に財を築く'
  },
  '天同': {
    element: '水',
    fortuneTrait: '穏やかな財運。安定志向',
    description: '福星。安定した収入と平穏な金銭運'
  },
  '廉貞': {
    element: '火',
    fortuneTrait: '次財星。権力・政治と結びつく財',
    description: '囚星でもあり次財星。複雑な金銭運'
  },
  '天府': {
    element: '土',
    fortuneTrait: '財庫の星。蓄財能力抜群',
    description: '財庫の星。お金を貯める能力に優れる'
  },
  '太陰': {
    element: '水',
    fortuneTrait: '田宅財星。不動産・資産運用',
    description: '財帛の星。不動産や資産運用で財を築く'
  },
  '貪狼': {
    element: '水木',
    fortuneTrait: '投機・ギャンブル運。偏財',
    description: '桃花の星。偏財や投機的な金銭運'
  },
  '巨門': {
    element: '水',
    fortuneTrait: '口才で財を得る。営業・交渉',
    description: '口舌の星。コミュニケーション力で財を得る'
  },
  '天相': {
    element: '水',
    fortuneTrait: '補佐で財を得る。組織内出世',
    description: '印星。組織内でのキャリアを通じて財を得る'
  },
  '天梁': {
    element: '土',
    fortuneTrait: '清廉な財。公職・士業向き',
    description: '清官の星。清廉で安定した財運'
  },
  '七殺': {
    element: '金火',
    fortuneTrait: '開拓精神で財を築く。起業家',
    description: '殺星。リスクを取って大きな財を築く'
  },
  '破軍': {
    element: '水',
    fortuneTrait: '破壊と創造。変革で財を得る',
    description: '変動の星。変化を通じて財を得る'
  }
};

// 金運タイプ定義
export const FORTUNE_TYPES = {
  '帝王財運型': {
    condition: '紫微在財帛宮 または 財帛宮に化禄+左輔右弼',
    description: '大きなスケールの財運。経営者・投資家向き',
    successPattern: '組織を率いて大きな事業を展開',
    jobs: ['CEO', '経営者', '投資ファンドマネージャー', '政治家']
  },
  '実業家型': {
    condition: '武曲在財帛宮 または 武曲化禄',
    description: 'コツコツ型の正財運。実業で財を築く',
    successPattern: '専門技能を磨き、実力で稼ぐ',
    jobs: ['銀行員', '会計士', '製造業経営者', 'ITエンジニア']
  },
  '蓄財型': {
    condition: '天府在財帛宮 または 田宅宮に吉星集中',
    description: '貯蓄能力が高い。資産を守り増やす',
    successPattern: '長期投資と堅実な資産形成',
    jobs: ['資産運用アドバイザー', '不動産業', '保険業', '公務員']
  },
  '投機型': {
    condition: '貪狼在財帛宮 または 貪狼化禄',
    description: '偏財運・ギャンブル運あり。投機向き',
    successPattern: 'リスクを取って大きなリターン',
    jobs: ['トレーダー', '営業職', '芸能関係', '飲食店経営']
  },
  '知識財型': {
    condition: '天機在財帛宮 または 文昌文曲在財帛宮',
    description: '頭脳労働で財を得る。知的財産',
    successPattern: '専門知識やスキルの収益化',
    jobs: ['コンサルタント', '教師・講師', 'ライター', 'エンジニア']
  },
  '名声財型': {
    condition: '太陽在財帛宮（廟旺） または 太陽化禄',
    description: '名声とともに財が来る。表舞台向き',
    successPattern: '社会的評価を高めて収入増',
    jobs: ['政治家', '医師', '弁護士', 'インフルエンサー']
  },
  '不動産財型': {
    condition: '太陰在財帛宮 または 田宅宮に太陰',
    description: '不動産・資産運用で財を築く',
    successPattern: '不動産投資・賃貸収入',
    jobs: ['不動産業', '建築業', 'インテリアデザイナー', '資産管理']
  },
  '開拓者型': {
    condition: '七殺在財帛宮 または 破軍在財帛宮',
    description: 'ゼロから財を築く。起業家タイプ',
    successPattern: '新規事業・ベンチャー',
    jobs: ['起業家', 'フリーランス', '営業職', '投資家']
  }
};

// 成功パターン定義
export const SUCCESS_PATTERNS = {
  'コツコツ積み上げ型': {
    description: '地道な努力と堅実な積み重ねで財を築くタイプ',
    advice: '派手な投機は避け、専門性を磨き続けることで成功',
    timing: '40代以降に花開く傾向'
  },
  '一攫千金型': {
    description: '大きなチャンスを掴んで一気に財を得るタイプ',
    advice: '直感を信じつつも、リスク管理を怠らないこと',
    timing: '30代でチャンス到来の可能性'
  },
  '人脈活用型': {
    description: '人脈と信頼関係から財運が開けるタイプ',
    advice: '人との縁を大切にし、ネットワークを広げること',
    timing: '人間関係の構築後、徐々に上昇'
  },
  '専門技能型': {
    description: '高度な専門知識やスキルで財を得るタイプ',
    advice: '常に学び続け、スキルを最新に保つこと',
    timing: '専門性確立後の30代後半から'
  },
  '資産運用型': {
    description: '資産運用や不動産投資で財を増やすタイプ',
    advice: '早めに資産形成を始め、複利効果を活かす',
    timing: '資産が雪だるま式に増える50代以降'
  }
};
